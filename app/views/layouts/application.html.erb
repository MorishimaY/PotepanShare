<!DOCTYPE html>
<html>
<head lang="ja">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PotepanShare</title>
  <%= csrf_meta_tags %>
  <%= csp_meta_tag %>

  <%= stylesheet_link_tag 'application', media: 'all', 'data-turbolinks-track': 'reload' %>
  <%= javascript_pack_tag 'application', 'data-turbolinks-track': 'reload' %>
  <%= javascript_include_tag 'application', 'data-turbolinks-track': 'reload' %>

  <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.bundle.min.js"></script>
</head>

<body>
  <header>
    <nav class="navbar">
      <div class="container-fluid">
        <a href="/" class="logo">ぽてぱんしぇあ</a>
        <% if user_signed_in? %>
          <div class="NavProfile" id="dropdownMenu">
            <div class="avatar">
              <%= image_tag @user.avatar.url, class: 'user_avatar' %>
            </div>
            <a class="NavProfile_name"><%= @user.name %></a>
            <ul class="dropdown__lists">
              <li><%= link_to "施設の新規登録", new_room_path %></li>
              <li><%= link_to "予約済み一覧", reservations_path %></li>
              <li><%= link_to "登録済み一覧", :rooms_own %></li>
              <li><%= link_to "アカウント設定", :users_profile %></li>
              <li><%= link_to "ログアウト", destroy_user_session_path, method: :delete, data: { turbo_method: :delete }, class: "nav-link" %></li>
            </ul>
          </div>
        <% else %>
          <div class="sign-container">
            <%= link_to "新規登録", new_user_registration_path, class: "sign"%>
            <%= link_to "ログイン", new_user_session_path, class: "sign" %>
          </div>
        <% end %>
      </div>
    </nav>
  </header>

  <main>
    <div>
      <%= form_with(url: search_rooms_path, method: :get, local: true) do %>
        <%= label_tag :address_query, 'Address' %>
        <%= text_field_tag :address_query, params[:address_query] %>

        <%= label_tag :detail_query, 'Detail' %>
        <%= text_field_tag :detail_query, params[:detail_query] %>

        <%= submit_tag 'Search', name: nil %>
      <% end %>

      <% if @rooms %>
        <% @rooms.each do |room| %>
          <!-- Room details can be displayed here -->
        <% end %>
      <% end %>
    </div>
    
    <%= yield %>
  </main>
</body>
</html>
